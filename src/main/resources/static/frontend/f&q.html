<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Graphura – FAQs</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* ===== SIDEBAR ===== */
    .sidebar-link {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 14px;
      border-radius: 14px;
      font-weight: 500;
      color: #475569;
      transition: all 0.25s ease;
    }
    .sidebar-link:hover {
      background: rgba(249,115,22,0.08);
      color: #f97316;
    }
    .sidebar-active {
      background: rgba(249,115,22,0.15);
      color: #f97316;
      box-shadow: inset 0 0 0 1px rgba(249,115,22,0.25);
      backdrop-filter: blur(12px);
    }

    /* ===== MOBILE SIDEBAR ===== */
    .mobile-menu-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 38px;
      height: 38px;
      border-radius: 8px;
      background: rgba(249, 115, 22, 0.12);
      border: 1px solid rgba(249, 115, 22, 0.25);
      cursor: pointer;
      transition: all 0.25s ease;
      flex-direction: column;
      padding: 0;
      flex-shrink: 0;
    }

    .mobile-menu-btn:hover {
      background: rgba(249, 115, 22, 0.2);
      border-color: rgba(249, 115, 22, 0.4);
    }

    .mobile-menu-btn span {
      width: 18px;
      height: 2px;
      background: #f97316;
      display: block;
      margin: 2.5px 0;
      transition: all 0.25s ease;
      border-radius: 1px;
    }

    .mobile-sidebar-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
      z-index: 30;
    }

    .mobile-sidebar-overlay.open {
      background: rgba(0, 0, 0, 0.4);
      opacity: 1;
      pointer-events: auto;
    }

    .mobile-sidebar {
      position: fixed;
      left: 0;
      top: 0;
      height: 100vh;
      width: 256px;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.98) 0%, rgba(255, 247, 237, 0.95) 100%);
      border-r: 2px solid rgba(249, 115, 22, 0.3);
      transform: translateX(-100%);
      transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 40;
      box-shadow: 4px 0 24px rgba(0, 0, 0, 0.15);
      overflow-y: auto;
    }

    .mobile-sidebar.open {
      transform: translateX(0);
    }

    /* FAQ ACCORDION */
    .faq-item {
      border: 1px solid rgba(15, 23, 42, 0.06);
      border-radius: 0.75rem;
      overflow: hidden;
      background: transparent;
      transition: box-shadow 0.24s ease, border-color 0.24s ease, transform 0.24s ease;
      position: relative;
    }
    .faq-item::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, rgba(15,23,42,0.02), rgba(15,23,42,0.05), rgba(15,23,42,0.02));
    }
    .faq-item:hover {
      border-color: rgba(15,23,42,0.12);
      box-shadow: 0 6px 18px rgba(2,6,23,0.04);
      transform: translateY(-2px);
    }
    .faq-item.open {
      border-color: rgba(15,23,42,0.14);
      box-shadow: 0 8px 22px rgba(2,6,23,0.05);
    }
    .faq-question {
      cursor: pointer;
      padding: 0.875rem 1.125rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-weight: 600;
      font-size: 0.9rem;
      color: #1e293b;
      transition: all 0.3s ease;
      user-select: none;
      background: linear-gradient(90deg, rgba(249,115,22,0) 0%, rgba(249,115,22,0.02) 100%);
    }
    .faq-question:hover {
      color: #f97316;
      background: linear-gradient(90deg, rgba(249,115,22,0.02) 0%, rgba(249,115,22,0.06) 100%);
    }
    .faq-item.open .faq-question {
      color: #f97316;
      background: linear-gradient(90deg, rgba(249,115,22,0.04) 0%, rgba(249,115,22,0.08) 100%);
    }
    .faq-question span {
      font-size: 1.2rem;
      color: #f97316;
      flex-shrink: 0;
      margin-left: 0.5rem;
      transition: color 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .faq-item.open .faq-question span {
      color: #ec4899;
    }
    .faq-answer {
      padding: 0 1.125rem 0.875rem;
      display: none;
      color: #475569;
      font-size: 0.85rem;
      line-height: 1.5;
      animation: slideDown 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      background: linear-gradient(90deg, rgba(249,115,22,0.02) 0%, rgba(249,115,22,0.01) 100%);
    }
    .faq-item.open .faq-answer {
      display: block;
    }
    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* FORM STYLING */
    input, textarea {
      border: 2px solid rgba(249,115,22,0.2);
      transition: all 0.3s ease;
    }
    input:focus, textarea:focus {
      outline: none;
      box-shadow: 0 0 0 4px rgba(249,115,22,0.15);
      border-color: #f97316;
      background: linear-gradient(135deg, rgba(255,255,255,0.98) 0%, rgba(249,115,22,0.02) 100%);
    }
    input::placeholder, textarea::placeholder {
      color: rgba(71, 85, 105, 0.6);
    }

    .submit-btn {
      background: linear-gradient(135deg, #f97316 0%, #ec4899 100%);
      transition: all 0.3s ease;
    }
    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(249,115,22,0.3);
    }
    .submit-btn:active {
      transform: translateY(0);
    }
  </style>
</head>

<body class="bg-slate-50 text-slate-800 min-h-screen">

<!-- MOBILE SIDEBAR OVERLAY -->
<div id="mobileSidebarOverlay" class="mobile-sidebar-overlay" onclick="closeMobileSidebar()"></div>

<!-- MOBILE SIDEBAR -->
<aside id="mobileSidebar" class="mobile-sidebar">
  <!-- LOGO -->
  <div class="px-4 py-4 border-b flex items-center justify-between">
      <img src="assets/graphuralogo.png" class="h-12" alt="Graphura Logo" />
      <button class="text-gray-500 hover:text-gray-700 text-xl" onclick="closeMobileSidebar()">✕</button>
    </div>

  <!-- NAV -->
  <nav class="px-4 py-6 space-y-1 flex-1">
    <a href="main.html" class="sidebar-link" onclick="closeMobileSidebar()">
      Dashboard
    </a>
    <a href="connect.html" class="sidebar-link" onclick="closeMobileSidebar()">
      Channels
    </a>
    <a href="analysis.html" class="sidebar-link" onclick="closeMobileSidebar()">
      Analytics
    </a>
    <a href="help.html" class="sidebar-link" onclick="closeMobileSidebar()">
      Help & Guide
    </a>
    <a href="f&q.html" class="sidebar-link sidebar-active" onclick="closeMobileSidebar()">
      FAQs
    </a>
  </nav>

  <!-- USER PROFILE -->
  <div class="p-4 border-t relative">
    <button id="mobileSidebarProfileBtn"
      class="w-full flex items-center gap-3 p-3 rounded-full bg-white/80 border border-orange-200/40 shadow-sm hover:shadow-md hover:bg-orange-50/60 hover:border-orange-300/60 transition">
      <div class="w-9 h-9 rounded-full bg-gradient-to-br from-orange-200 to-pink-200 flex items-center justify-center font-bold">
        <img src="assets/user_icon.png" class="w-5 h-5" />
      </div>
      <div class="truncate text-left">
        <p id="mobileSidebarUserName" class="text-sm font-semibold text-slate-800">User</p>
        <p id="mobileSidebarUserEmail" class="text-xs text-slate-600 truncate"></p>
      </div>
    </button>

    <!-- DROPDOWN -->
    <div id="mobileSidebarProfileMenu"
      class="hidden absolute bottom-20 left-4 right-4 bg-white border rounded-xl shadow-xl overflow-hidden z-50">
      <button onclick="window.location.href='home.html'"
        class="w-full px-4 py-3 text-left text-slate-700 hover:bg-slate-50 font-medium border-b">
        Go to Home
      </button>
      <button onclick="logout()"
        class="w-full px-4 py-3 text-left text-red-600 hover:bg-red-50 font-medium">
        Logout
      </button>
    </div>
  </div>
</aside>

<!-- ================= APP LAYOUT ================= -->
<div class="flex min-h-screen">

  <!-- ================= SIDEBAR ================= -->
  <aside class="hidden lg:flex fixed left-0 top-0 h-screen w-64 bg-white border-r border-orange-200/30 flex flex-col justify-between">

    <!-- LOGO -->
    <div class="px-6 py-6 border-b flex items-center justify-center">
      <img src="assets/graphuralogo.png" class="h-16" />
    </div>

    <!-- NAV -->
    <nav class="px-4 py-6 space-y-1 flex-1">

      <a href="main.html" class="sidebar-link">
        Dashboard
      </a>
      <a href="connect.html" class="sidebar-link">
        Channels
      </a>
      <a href="analysis.html" class="sidebar-link">
        Analytics
      </a>
      <a href="help.html" class="sidebar-link">
        Help & Guide
      </a>
      <a href="f&q.html" class="sidebar-link sidebar-active">
        FAQs
      </a>

    </nav>

    <!-- USER PROFILE -->
    <div class="p-4 relative">

      <!-- Sidebar Profile (place LAST in sidebar) -->
<button id="sidebarProfileBtn"
  class="mt-auto w-full flex items-center gap-3
         px-4 py-3
         rounded-full
         bg-white/80 border border-orange-200/40
         hover:bg-orange-50/60 hover:border-orange-300/60
         shadow-sm hover:shadow-md
         transition">

  <!-- Avatar -->
  <div class="w-10 h-10 rounded-full
              bg-gradient-to-br from-orange-200 to-pink-200
              flex items-center justify-center
              shrink-0">
    <img src="assets/user_icon.png" class="w-5 h-5" alt="User" />
  </div>

  <!-- User Info -->
  <div class="min-w-0 text-left">
    <p id="sidebarUserName"
       class="text-sm font-semibold text-slate-800 leading-tight">
      User
    </p>

    <!-- Email: readable, not truncated harshly -->
    <p id="sidebarUserEmail"
       class="text-xs text-slate-600 leading-tight break-all">
      user@email.com
    </p>
  </div>

</button>


      <!-- DROPDOWN -->
      <div id="sidebarProfileMenu"
        class="hidden absolute bottom-20 left-4 right-4 bg-white border rounded-xl shadow-xl overflow-hidden z-50">

        <button onclick="window.location.href='home.html'"
          class="w-full px-4 py-3 text-left text-slate-700 hover:bg-slate-50 font-medium border-b">
          Go to Home
        </button>

        <button onclick="logout()"
          class="w-full px-4 py-3 text-left text-red-600 hover:bg-red-50 font-medium">
          Logout
        </button>

      </div>

    </div>

  </aside>

  <!-- ===== MAIN ===== -->
  <main class="lg:ml-64 flex-1 flex flex-col">
    <div class="lg:hidden flex items-center justify-between px-4 py-4 bg-gradient-to-r from-white to-orange-50/30 border-b border-orange-200/30 fixed top-0 left-0 right-0 z-20 shadow-sm">
      <img src="assets/graphuralogo.png" class="h-10 drop-shadow-sm" alt="Graphura Logo" />
      <button class="mobile-menu-btn" onclick="openMobileSidebar()" aria-label="Toggle menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>

    <div class="flex-1 px-4 lg:px-10 py-6 overflow-y-auto">

    <!-- HEADER -->
    <header class="mb-8 lg:mb-10 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 relative z-10 pt-16 lg:pt-0 bg-gradient-to-r from-transparent via-orange-100/5 to-transparent rounded-2xl px-4 py-6">
      <!-- TOP ROW: MOBILE BUTTON & TITLE -->
      <div class="flex items-start gap-3 sm:gap-4">

        <!-- TITLE AND DESCRIPTION -->
        <div class="flex-1 min-w-0">
          <div class="flex items-center gap-3">
            <div class="w-12 h-12 flex items-center justify-center">
              <svg class="w-8 h-8 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </div>
            <h1 class="text-3xl sm:text-4xl lg:text-5xl font-black text-slate-900 tracking-tight">
              Frequently Asked Questions
            </h1>
          </div>
          <p class="text-sm sm:text-base text-slate-600 mt-2 font-medium">
            Everything you need to know about using Graphura effectively.
          </p>
        </div>
      </div>
    </header>

    <!-- ===== FAQ SECTION ===== -->
    <section class="space-y-2 max-w-3xl mb-12">

      <!-- FAQ ITEM -->
      <div class="faq-item">
        <div class="faq-question" onclick="toggleFAQ(this)">
          <span class="flex-1">How does Graphura schedule posts?</span>
          <span class="text-lg">+</span>
        </div>
        <div class="faq-answer">
          Graphura allows you to select content, platform, and time. Once scheduled, the post is automatically published at the selected time using connected platform APIs. You can manage multiple posts across different platforms simultaneously from a single dashboard.
        </div>
      </div>

      <div class="faq-item">
        <div class="faq-question" onclick="toggleFAQ(this)">
          <span class="flex-1">Which social media platforms are supported?</span>
          <span class="text-lg">+</span>
        </div>
        <div class="faq-answer">
          Currently supported platforms include Facebook, Twitter/X, LinkedIn, YouTube, Pinterest, and WhatsApp. We're continuously adding new platforms to expand your reach.
        </div>
      </div>

      <div class="faq-item">
        <div class="faq-question" onclick="toggleFAQ(this)">
          <span class="flex-1">Can I edit or delete a scheduled post?</span>
          <span class="text-lg">+</span>
        </div>
        <div class="faq-answer">
          Yes. You can delete any scheduled post before its publishing time from the Dashboard. Once a post is published, you can only delete it from the social media platform directly.
        </div>
      </div>

      <div class="faq-item">
        <div class="faq-question" onclick="toggleFAQ(this)">
          <span class="flex-1">Why is my analytics data not showing?</span>
          <span class="text-lg">+</span>
        </div>
        <div class="faq-answer">
          Analytics appear once posts are published. Make sure posts are completed and the Analytics page is refreshed. Data typically updates within 15-30 minutes after publication. You may also need to authenticate with the respective platform's analytics service.
        </div>
      </div>

      <div class="faq-item">
        <div class="faq-question" onclick="toggleFAQ(this)">
          <span class="flex-1">Is my account data secure?</span>
          <span class="text-lg">+</span>
        </div>
        <div class="faq-answer">
          Yes. Graphura uses JWT authentication tokens and platform OAuth to ensure your data and connected accounts remain secure. All sensitive data is encrypted and stored securely. We never store your platform passwords.
        </div>
      </div>

      <div class="faq-item">
        <div class="faq-question" onclick="toggleFAQ(this)">
          <span class="flex-1">How can I connect my social media accounts?</span>
          <span class="text-lg">+</span>
        </div>
        <div class="faq-answer">
          Navigate to the "Channels" section and click on the platform you want to connect. You'll be redirected to the platform's login page where you can authorize Graphura to manage your posts. The process is secure and you maintain full control over permissions.
        </div>
      </div>

      <div class="faq-item">
        <div class="faq-question" onclick="toggleFAQ(this)">
          <span class="flex-1">What happens if my internet connection is lost during scheduling?</span>
          <span class="text-lg">+</span>
        </div>
        <div class="faq-answer">
          Graphura is designed to handle network interruptions gracefully. Your scheduled posts are saved to our servers before confirmation. If the connection is lost, you can simply retry the action. Rest assured your data won't be lost.
        </div>
      </div>

      <div class="faq-item">
        <div class="faq-question" onclick="toggleFAQ(this)">
          <span class="flex-1">Can I schedule posts in advance?</span>
          <span class="text-lg">+</span>
        </div>
        <div class="faq-answer">
          Absolutely! You can schedule posts weeks or months in advance. This is perfect for planning content calendars and ensuring consistent posting even when you're busy. Use the Calendar view to get an overview of all scheduled posts.
        </div>
      </div>

    </section>

    <!-- ===== ASK A QUESTION ===== -->
    <section class="max-w-3xl bg-gradient-to-br from-white to-orange-50/30 border-2 border-orange-200/40 rounded-2xl p-6 lg:p-8 shadow-lg hover:shadow-xl transition-all duration-300">
      <div class="mb-6">
        <h2 class="text-2xl lg:text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-orange-600 to-pink-600 mb-2">Still have a question?</h2>
        <p class="text-slate-600 font-medium">Ask us anything and our team will help you within 24 hours.</p>
      </div>

      <form class="space-y-5" id="contactForm">
        <input 
          type="text" 
          id="contactName"
          placeholder="Your Name"
          required
          class="w-full rounded-xl px-4 py-3 focus:outline-none transition text-slate-800 bg-white/80 placeholder-slate-400"
        />

        <input 
          type="email" 
          id="contactEmail"
          placeholder="Your Email"
          required
          class="w-full rounded-xl px-4 py-3 focus:outline-none transition text-slate-800 bg-white/80 placeholder-slate-400"
        />

        <textarea 
          id="contactMessage"
          rows="5" 
          placeholder="Write your question here..."
          required
          class="w-full rounded-xl px-4 py-3 focus:outline-none transition resize-none text-slate-800 bg-white/80 placeholder-slate-400"
        ></textarea>

        <div id="formMessage" class="hidden p-3 rounded-lg text-sm"></div>

        <button 
          type="submit"
          class="submit-btn px-6 py-3 text-white rounded-lg font-semibold transition"
        >
          Submit Question
        </button>
      </form>
    </section>

    </div>
  </main>
</div>

</div>

<script>
  // ===== AUTHENTICATION CHECK =====
  window.addEventListener('load', () => {
    const authToken = localStorage.getItem('authToken');
    const currentPath = window.location.pathname;
    
    // Redirect to login if not authenticated
    if (!authToken) {
      window.location.href = 'home.html';
      return;
    }

    // Display user info in sidebars
    const userEmail = localStorage.getItem('userEmail') || 'user@email.com';
    const userName = localStorage.getItem('userName') || 'User';
    
    // Update desktop sidebar
    const sidebarUserName = document.getElementById('sidebarUserName');
    const sidebarUserEmail = document.getElementById('sidebarUserEmail');
    if (sidebarUserName) sidebarUserName.textContent = userName;
    if (sidebarUserEmail) sidebarUserEmail.textContent = userEmail;
    
    // Update mobile sidebar
    const mobileSidebarUserName = document.getElementById('mobileSidebarUserName');
    const mobileSidebarUserEmail = document.getElementById('mobileSidebarUserEmail');
    if (mobileSidebarUserName) mobileSidebarUserName.textContent = userName;
    if (mobileSidebarUserEmail) mobileSidebarUserEmail.textContent = userEmail;

    // Initialize profile dropdowns
    initializeProfileDropdown();
  });

  // ===== PROFILE DROPDOWN INITIALIZATION =====
  function initializeProfileDropdown() {
    // Desktop sidebar profile button
    const sidebarProfileBtn = document.getElementById('sidebarProfileBtn');
    const sidebarProfileMenu = document.getElementById('sidebarProfileMenu');

    if (sidebarProfileBtn && sidebarProfileMenu) {
      let isOpen = false;

      const toggleDropdown = (e) => {
        e.stopPropagation();
        isOpen = !isOpen;
        sidebarProfileMenu.classList.toggle('hidden', !isOpen);
      };

      const closeDropdown = () => {
        isOpen = false;
        sidebarProfileMenu.classList.add('hidden');
      };

      sidebarProfileBtn.addEventListener('click', toggleDropdown);
      document.addEventListener('click', closeDropdown);
    }

    // Mobile sidebar profile button
    const mobileSidebarProfileBtn = document.getElementById('mobileSidebarProfileBtn');
    const mobileSidebarProfileMenu = document.getElementById('mobileSidebarProfileMenu');

    if (mobileSidebarProfileBtn && mobileSidebarProfileMenu) {
      let isOpen = false;

      const toggleDropdown = (e) => {
        e.stopPropagation();
        isOpen = !isOpen;
        mobileSidebarProfileMenu.classList.toggle('hidden', !isOpen);
      };

      const closeDropdown = () => {
        isOpen = false;
        mobileSidebarProfileMenu.classList.add('hidden');
      };

      mobileSidebarProfileBtn.addEventListener('click', toggleDropdown);
      document.addEventListener('click', closeDropdown);
    }
  }

  // ===== MOBILE SIDEBAR FUNCTIONS =====
  function openMobileSidebar() {
    const sidebar = document.getElementById('mobileSidebar');
    const overlay = document.getElementById('mobileSidebarOverlay');
    sidebar.classList.add('open');
    overlay.classList.add('open');
    document.body.style.overflow = 'hidden';
  }

  function closeMobileSidebar() {
    const sidebar = document.getElementById('mobileSidebar');
    const overlay = document.getElementById('mobileSidebarOverlay');
    sidebar.classList.remove('open');
    overlay.classList.remove('open');
    document.body.style.overflow = 'auto';
  }

  // ===== FAQ TOGGLE =====
  function toggleFAQ(element) {
    const faqItem = element.closest('.faq-item');
    const isOpen = faqItem.classList.contains('open');

    document.querySelectorAll('.faq-item.open').forEach(item => {
      if (item !== faqItem) {
        item.classList.remove('open');
        setFaqIndicator(item, false);
      }
    });

    if (isOpen) {
      faqItem.classList.remove('open');
      setFaqIndicator(faqItem, false);
    } else {
      faqItem.classList.add('open');
      setFaqIndicator(faqItem, true);
    }
  }

  function setFaqIndicator(item, open) {
    const indicator = item.querySelector('.faq-question span:last-child');
    if (indicator) {
      indicator.textContent = open ? '-' : '+';
    }
  }

  // Close FAQ when clicking outside
  document.addEventListener('click', (e) => {
    if (!e.target.closest('.faq-item') && !e.target.closest('.faq-question')) {
      document.querySelectorAll('.faq-item.open').forEach(item => {
        item.classList.remove('open');
      });
    }
  });

  // ===== FORM SUBMISSION =====
  document.getElementById('contactForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const form = e.target;
    const submitBtn = form.querySelector('button[type="submit"]');
    const formMessage = document.getElementById('formMessage');
    
    const name = document.getElementById('contactName').value.trim();
    const email = document.getElementById('contactEmail').value.trim();
    const message = document.getElementById('contactMessage').value.trim();

    // Validation
    if (!name || !email || !message) {
      showFormMessage('Please fill in all fields', 'error');
      return;
    }

    if (!isValidEmail(email)) {
      showFormMessage('Please enter a valid email address', 'error');
      return;
    }

    if (message.length < 10) {
      showFormMessage('Question should be at least 10 characters long', 'error');
      return;
    }

    // Show loading state
    submitBtn.disabled = true;
    const originalText = submitBtn.textContent;
    submitBtn.textContent = 'Sending...';

    try {
      // Get auth token for backend request
      const authToken = localStorage.getItem('authToken');
      
      const response = await fetch('http://localhost:8082/api/contact/faq', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${authToken}`
        },
        body: JSON.stringify({
          name,
          email,
          message,
          source: 'faq_page'
        })
      });

      if (response.ok) {
        showFormMessage('✓ Question submitted successfully! We\'ll respond within 24 hours.', 'success');
        form.reset();
        
        // Reset button after 3 seconds
        setTimeout(() => {
          submitBtn.disabled = false;
          submitBtn.textContent = originalText;
          formMessage.classList.add('hidden');
        }, 3000);
      } else {
        const errorData = await response.json();
        showFormMessage(errorData.message || 'Error submitting question. Please try again.', 'error');
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
      }
    } catch (error) {
      console.error('Form submission error:', error);
      showFormMessage('Network error. Please check your connection and try again.', 'error');
      submitBtn.disabled = false;
      submitBtn.textContent = originalText;
    }
  });

  function showFormMessage(message, type) {
    const formMessage = document.getElementById('formMessage');
    formMessage.textContent = message;
    formMessage.classList.remove('hidden', 'bg-green-50', 'text-green-800', 'bg-red-50', 'text-red-800');
    
    if (type === 'success') {
      formMessage.classList.add('bg-green-50', 'text-green-800');
    } else if (type === 'error') {
      formMessage.classList.add('bg-red-50', 'text-red-800');
    }
  }

  function isValidEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
  }

  // ===== LOGOUT FUNCTION =====
  async function logout() {
    let ok;
    if (typeof showConfirm === 'function') {
      ok = await showConfirm('Are you sure you want to logout?');
    } else {
      ok = confirm('Are you sure you want to logout?');
    }
    if (ok) {
      localStorage.removeItem('authToken');
      localStorage.removeItem('userEmail');
      localStorage.removeItem('userName');
      window.location.href = 'home.html';
    }
  }
</script>

<!-- Include global confirm helper -->
<script src="confirm.js"></script>

</body>
</html>
